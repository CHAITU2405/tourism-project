{% extends "base.html" %}

{% block title %}{{ _('Login - TourismHub') }}{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card shadow-custom">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <h2 class="text-gradient">{{ _('Welcome Back') }}</h2>
                        <p class="text-muted">{{ _('Sign in to your TourismHub account') }}</p>
                    </div>

                    <form method="POST" class="needs-validation" novalidate>
                        <div class="mb-3">
                            <label for='username' class='form-label'>{{ _('Username or Email') }}</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-user"></i>
                                </span>
                                <input type="text" class="form-control" id="username" name="username" required>
                            </div>
                            <div class='invalid-feedback'>
                                {{ _('Please provide your username or email.') }}
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for='password' class='form-label'>{{ _('Password') }}</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-lock"></i>
                                </span>
                                <input type="password" class="form-control" id="password" name="password" required>
                                <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class='invalid-feedback'>
                                {{ _('Please provide your password.') }}
                            </div>
                        </div>

                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="remember">
                            <label class='form-check-label' for='remember'>
                                {{ _('Remember me') }}
                            </label>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-sign-in-alt"></i> {{ _('Sign In') }}
                            </button>
                        </div>
                    </form>

                    <div class="text-center mt-4">
                        <p class="text-muted">{{ _('Don\'t have an account?') }} <a href="{{ url_for('register') }}" class="text-primary">{{ _('Create one here') }}</a></p>
                    </div>

                    <!-- Demo Accounts -->
                    <div class="mt-4 p-3 bg-light rounded">
                        <h6 class='text-center mb-3'>{{ _('Demo Accounts') }}</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <strong>{{ _('Super Admin:') }}</strong><br>
                                    {{ _('Username:') }} superadmin<br>
                                    {{ _('Password:') }} admin123
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <strong>{{ _('Regular User:') }}</strong><br>
                                    {{ _('Register as "user" type') }}<br>
                                    {{ _('to book hotels') }}
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle password visibility
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const eyeIcon = togglePassword.querySelector('i');

    togglePassword.addEventListener('click', function() {
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            eyeIcon.classList.remove('fa-eye');
            eyeIcon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            eyeIcon.classList.remove('fa-eye-slash');
            eyeIcon.classList.add('fa-eye');
        }
    });

    // Auto-fill demo credentials
    const demoButtons = document.createElement('div');
    demoButtons.className = 'text-center mt-3';
    demoButtons.innerHTML = `
        <button type="button" class="btn btn-sm btn-outline-primary me-2" onclick="fillDemo('superadmin', 'admin123')">
            {{ _('Fill Super Admin') }}
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="clearForm()">
            {{ _('Clear Form') }}
        </button>
    `;
    document.querySelector('.card-body').appendChild(demoButtons);
});

function fillDemo(username, password) {
    document.getElementById('username').value = username;
    document.getElementById('password').value = password;
}

function clearForm() {
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
}
</script>
{% endblock %}
