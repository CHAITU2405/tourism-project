{% extends "base.html" %}

{% block title %}Booking Confirmation - TourismHub{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-lg">
                <div class="card-header bg-success text-white text-center">
                    <h2 class="mb-0">
                        <i class="fas fa-check-circle"></i> Booking Confirmed!
                    </h2>
                    <p class="mb-0">Your vehicle rental has been successfully booked</p>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-receipt"></i> Booking Details</h5>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Booking Reference:</strong></td>
                                    <td><span class="badge bg-primary">{{ booking.booking_reference }}</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Status:</strong></td>
                                    <td><span class="badge bg-warning">{{ booking.status.title() }}</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Payment Status:</strong></td>
                                    <td><span class="badge bg-info">{{ booking.payment_status.title() }}</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Booking Date:</strong></td>
                                    <td>{{ booking.created_at.strftime('%B %d, %Y at %I:%M %p') }}</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="col-md-6">
                            <h5><i class="fas fa-car"></i> Vehicle Information</h5>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Vehicle:</strong></td>
                                    <td>{{ booking.vehicle.make }} {{ booking.vehicle.model }} ({{ booking.vehicle.year }})</td>
                                </tr>
                                <tr>
                                    <td><strong>Type:</strong></td>
                                    <td>{{ booking.vehicle.vehicle_type.title() }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Seating:</strong></td>
                                    <td>{{ booking.vehicle.seating_capacity }} seats</td>
                                </tr>
                                <tr>
                                    <td><strong>Transmission:</strong></td>
                                    <td>{{ booking.vehicle.transmission.title() }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-building"></i> Rental Company</h5>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Company:</strong></td>
                                    <td>{{ booking.rental_company.name }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Address:</strong></td>
                                    <td>{{ booking.rental_company.address }}</td>
                                </tr>
                                <tr>
                                    <td><strong>City:</strong></td>
                                    <td>{{ booking.rental_company.city }}, {{ booking.rental_company.state }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Phone:</strong></td>
                                    <td>{{ booking.rental_company.phone }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Email:</strong></td>
                                    <td>{{ booking.rental_company.email }}</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="col-md-6">
                            <h5><i class="fas fa-calendar-alt"></i> Rental Period</h5>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Pickup Date:</strong></td>
                                    <td>{{ booking.pickup_date.strftime('%B %d, %Y') }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Pickup Time:</strong></td>
                                    <td>{{ booking.pickup_time.strftime('%I:%M %p') }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Return Date:</strong></td>
                                    <td>{{ booking.return_date.strftime('%B %d, %Y') }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Return Time:</strong></td>
                                    <td>{{ booking.return_time.strftime('%I:%M %p') }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Duration:</strong></td>
                                    <td>{{ (booking.return_date - booking.pickup_date).days }} day(s)</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-map-marker-alt"></i> Pickup & Return Locations</h5>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Pickup Location:</strong></td>
                                    <td>{{ booking.pickup_location }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Return Location:</strong></td>
                                    <td>{{ booking.return_location }}</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="col-md-6">
                            <h5><i class="fas fa-id-card"></i> Driver Information</h5>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Driver's License:</strong></td>
                                    <td>{{ booking.drivers_license }}</td>
                                </tr>
                                <tr>
                                    <td><strong>License Expiry:</strong></td>
                                    <td>{{ booking.drivers_license_expiry.strftime('%B %d, %Y') }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    {% if booking.special_requests %}
                        <hr>
                        <div class="row">
                            <div class="col-12">
                                <h5><i class="fas fa-comment"></i> Special Requests</h5>
                                <p class="text-muted">{{ booking.special_requests }}</p>
                            </div>
                        </div>
                    {% endif %}
                    
                    <hr>
                    
                    <div class="row">
                        <div class="col-12">
                            <h5><i class="fas fa-money-bill-wave"></i> Payment Information</h5>
                            <div class="alert alert-success">
                                <h4 class="alert-heading">Total Amount: â‚¹{{ booking.total_amount }}</h4>
                                <p class="mb-0">
                                    Payment is due at the time of vehicle pickup. 
                                    Please bring a valid driver's license and credit card for security deposit.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="alert alert-info">
                                <h6><i class="fas fa-info-circle"></i> Important Notes:</h6>
                                <ul class="mb-0">
                                    <li>Please arrive 15 minutes before your scheduled pickup time</li>
                                    <li>Bring a valid driver's license and credit card</li>
                                    <li>Inspect the vehicle thoroughly before taking possession</li>
                                    <li>Return the vehicle with the same fuel level as received</li>
                                    <li>Contact the rental company immediately if you need to modify your booking</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                        <a href="{{ url_for('manage_vehicle_bookings') }}" class="btn btn-primary">
                            <i class="fas fa-list"></i> View All Bookings
                        </a>
                        <a href="{{ url_for('vehicle_rentals') }}" class="btn btn-outline-primary">
                            <i class="fas fa-car"></i> Browse More Vehicles
                        </a>
                        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                            <i class="fas fa-home"></i> Back to Home
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
